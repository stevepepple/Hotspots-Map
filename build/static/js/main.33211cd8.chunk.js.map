{"version":3,"sources":["helpers.js","styles/map_styles.js","components/event_card.js","components/events_list.js","components/map.js","components/source.js","components/layer.js","components/markers.js","components/events_map.js","components/events_page.js","App.js","serviceWorker.js","index.js"],"names":["module","exports","getPosition","options","Promise","resolve","reject","navigator","geolocation","getCurrentPosition","position","console","log","places_circle","circle-radius","circle-color","circle-stroke-color","circle-stroke-width","stops","circle-opacity","circle-stroke-opacity","places_heatmap","heatmap-radius","heatmap-opacity","heatmap-color","events_circle","base","circle-translate","descriptionStyle","height","overflow","textOverflow","EventCard","this","props","content","categories","map","category","react_default","a","createElement","class","date","moment","start","start_time","Card","fluid","Image_Image","src","image","Content","Header","title","Meta","className","format","Description","style","description","extra","Icon","name","likes","Component","EventsList","has_items","data","length","top_item","items","shift","event","Grid","Column","event_card","link","properties","stackable","columns","Row","mapboxgl","accessToken","Map","_temp","_class","_React$Component","_this","Object","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","getChildContext","state","lat","lng","zoom","bearing","value","show_events","show_places","show_cluster","updateParent","bind","assertThisInitialized","inherits","createClass","key","_this2","_this$state","container","mapContainer","center","on","setState","addControl","NavigationControl","GeolocateControl","positionOptions","enableHighAccuracy","trackUserLocation","field","filter","setFilter","_this$props$active","active","property","setPaintProperty","_this3","children","defineProperty","ref","x","React","childContextTypes","PropTypes","object","Source","context","_this$props","id","url","addSource","type","removeSource","Children","child","cloneElement","sourceId","sourceLayer","layer","contextTypes","_this$props$layout","layout","_this$props$paint","paint","isLayerChecked","before","layerId","concat","addLayer","source","Marker","setLngLat","addTo","setLayoutProperty","nextProps","_this$props2","visibility","_this$props3","removeLayer","Markers","features","addMarkers","feature","size","img","document","setAttribute","el","width","downloadingImage","Image","onload","append","addEventListener","window","alert","geometry","coordinates","EventsMap","geojson","turf","has_data","components_map","source_Source","markers_Markers","EventsPage","lon","intervalIsSet","showEvents","query","querystring","stringify","distance","fetch","catch","err","error","then","json","res","helpers","coords","latitude","longitude","clearInterval","esm","selectedTabClassName","events_list","events_map","App","activeItem","BrowserRouter","Menu","pointing","Item","Link","to","Route","exact","path","component","Boolean","location","hostname","match","ReactDOM","render","src_App_0","getElementById","serviceWorker","ready","registration","unregister"],"mappings":"2EAAAA,EAAOC,QAAU,CAGbC,YAAY,SAAUC,GAClB,OAAO,IAAIC,QAAQ,SAAUC,EAASC,GAElCC,UAAUC,YAAYC,mBAAmB,SAAUC,GAC/CC,QAAQC,WAAYF,GACpBL,EAAQK,wFCRxBV,EAAOC,QAAU,CACbY,cAAe,CACbC,gBAAiB,CACjB,cACA,CAAC,cAAe,GAChB,CAAC,QACD,EAAG,CAAC,IAAK,GAAK,CAAC,YAAa,CAAC,MAAO,YACpC,GAAI,CAAC,IAAK,EAAG,CAAC,YAAa,CAAC,MAAO,YACnC,GAAI,CAAC,IAAK,GAAI,CAAC,YAAa,CAAC,MAAO,aAEpCC,eAAgB,UAChBC,sBAAuB,QACvBC,sBAAuB,CACrBC,MAAO,CACP,CAAC,GAAI,IACL,CAAC,GAAI,KAEPC,iBAAkB,CAChBD,MAAO,CAAC,CAAC,GAAI,GAAM,CAAC,GAAI,IAAM,CAAC,GAAI,IAAM,CAAC,GAAI,KAEhDE,wBAAyB,CACvBF,MAAO,CAAC,CAAC,GAAI,GAAM,CAAC,GAAI,IAAM,CAAC,GAAI,IAAM,CAAC,GAAI,MAElDG,eAAgB,CACdC,iBAAmB,CACjB,cACA,CAAC,UACD,CAAC,QACC,EAAG,EACH,GAAI,GACJ,GAAI,IAERC,kBAAmB,CACjB,cACA,CAAC,UACD,CAAC,QACC,EAAG,GACH,GAAI,IAERC,gBAAiB,CACf,cACA,CAAC,UACD,CAAC,mBACC,EAAG,qBACH,GAAK,yBACL,GAAK,UACL,GAAK,UACL,GAAK,UACL,EAAG,YAGTC,cAAe,CAEbX,gBAAiB,CACfY,KAAQ,EACRR,MAAS,CAAC,CAAC,EAAG,GAAI,CAAC,GAAI,MAEvBH,eAAgB,UAChBC,sBAAuB,UACvBC,sBAAuB,GACvBE,iBAAkB,GAClBQ,mBAAoB,EAAE,GAAI,6QCvD5BC,EAAmB,CACrBlB,SAAU,WACVmB,OAAQ,QACRC,SAAU,SACVC,aAAc,YAqCHC,mLA/BUC,KAAKC,MAAMC,QAAQC,WAAWC,IAAI,SAACC,GAAD,OAAcC,EAAAC,EAAAC,cAAA,QAAMC,MAAOJ,GAAb,cAAjE,IACIK,EAAOC,IAAOX,KAAKC,MAAMC,QAAQQ,MACjCE,EAAQZ,KAAKC,MAAMC,QAAQW,WAE/B,OACIP,EAAAC,EAAAC,cAAA,WACIF,EAAAC,EAAAC,cAACM,EAAA,EAAD,CAAMC,OAAK,GACPT,EAAAC,EAAAC,cAACQ,EAAA,EAAD,CAAOC,IAAKjB,KAAKC,MAAMC,QAAQgB,QAC/BZ,EAAAC,EAAAC,cAACM,EAAA,EAAKK,QAAN,KACIb,EAAAC,EAAAC,cAACM,EAAA,EAAKM,OAAN,KAAcpB,KAAKC,MAAMC,QAAQmB,OACjCf,EAAAC,EAAAC,cAACM,EAAA,EAAKQ,KAAN,KACIhB,EAAAC,EAAAC,cAAA,QAAMe,UAAU,QAAQb,EAAKc,OAAO,QAApC,IAA8CZ,IAElDN,EAAAC,EAAAC,cAACM,EAAA,EAAKW,YAAN,CAAkBC,MAAO/B,GAAmBK,KAAKC,MAAMC,QAAQyB,cAEnErB,EAAAC,EAAAC,cAACM,EAAA,EAAKK,QAAN,CAAcS,OAAK,GACftB,EAAAC,EAAAC,cAAA,SACIF,EAAAC,EAAAC,cAACqB,EAAA,EAAD,CAAMC,KAAK,SACV9B,KAAKC,MAAMC,QAAQ6B,MAFxB,qBAnBAC,sBCgCTC,mLApCP,IAAIC,EAAYlC,KAAKC,MAAMkC,KAAKC,OAAS,EACrCC,EAAW,KACXC,EAAQ,KASZ,OAPIJ,IAEAG,EAAWrC,KAAKC,MAAMkC,KAAKI,QAE3BD,EAAQtC,KAAKC,MAAMkC,KAAK/B,IAAI,SAACoC,GAAD,OAAWlC,EAAAC,EAAAC,cAACiC,EAAA,EAAKC,OAAN,KAAapC,EAAAC,EAAAC,cAACmC,EAAD,CAAWC,KAAMJ,EAAMK,WAAWD,KAAM1C,QAASsC,EAAMK,iBAI3GvC,EAAAC,EAAAC,cAAA,OAAKe,UAAU,WAEVW,EACG5B,EAAAC,EAAAC,cAACiC,EAAA,EAAD,CAAMK,WAAS,EAACC,QAAS,GACrBzC,EAAAC,EAAAC,cAACiC,EAAA,EAAKO,IAAN,KACI1C,EAAAC,EAAAC,cAACmC,EAAD,CAAWC,KAAMP,EAASQ,WAAWD,KAAM1C,QAASmC,EAASQ,cAEjEvC,EAAAC,EAAAC,cAACiC,EAAA,EAAKO,IAAN,KACKV,IAILhC,EAAAC,EAAAC,cAAA,8BAZZ,6BAfawB,wECDzBiB,IAASC,YAAc,yEA0IRC,OAxIRC,EAAAC,EAAA,SAAAC,GAWL,SAAAH,EAAYlD,GAAO,IAAAsD,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAxD,KAAAmD,IACjBI,EAAAC,OAAAE,EAAA,EAAAF,CAAAxD,KAAAwD,OAAAG,EAAA,EAAAH,CAAAL,GAAAS,KAAA5D,KAAMC,KALR4D,gBAAkB,iBAAO,CACvBzD,IAAKmD,EAAKO,MAAM1D,MAMhBmD,EAAKO,MAAQ,CACXC,IAAmB,cAAd9D,EAAM8D,MAAwB,KAAO9D,EAAM8D,IAAK,UACrDC,IAAmB,cAAd/D,EAAM+D,IAAsB/D,EAAM+D,KAAO,YAC9CC,KAA4B,qBAAfhE,EAAMgE,KAAuBhE,EAAMgE,KAAO,GACvDC,QAAkC,qBAAlBjE,EAAMiE,QAA0BjE,EAAMiE,QAAU,GAChE9D,IAAK,KACL+D,MAAO,MACPC,aAAa,EACbC,aAAa,EACbC,cAAc,GAEhBf,EAAKgB,aAAehB,EAAKgB,aAAaC,KAAlBhB,OAAAiB,EAAA,EAAAjB,QAAAiB,EAAA,EAAAjB,CAAAD,KAdHA,EAXd,OAAAC,OAAAkB,EAAA,EAAAlB,CAAAL,EAAAG,GAAAE,OAAAmB,EAAA,EAAAnB,CAAAL,EAAA,EAAAyB,IAAA,qBAAAT,MAAA,WA6BHzF,QAAQC,IAAIqB,KAAK8D,MAAM1D,OA7BpB,CAAAwE,IAAA,oBAAAT,MAAA,WAgCe,IAAAU,EAAA7E,KAAA8E,EACkB9E,KAAK8D,MAAjCE,EADUc,EACVd,IAAKD,EADKe,EACLf,IAAKG,EADAY,EACAZ,QAASD,EADTa,EACSb,KAE3BjE,KAAKI,IAAM,IAAI6C,IAASE,IAAI,CAC1B4B,UAAW/E,KAAKgF,aAChBtD,MAAO,wDACPuD,OAAQ,CAACjB,EAAKD,GACdG,QAASA,EACTD,KAAMA,IAGRjE,KAAKI,IAAI8E,GAAG,OAAQ,WAClBL,EAAKM,SAAS,CAAE/E,IAAKyE,EAAKzE,MAC1ByE,EAAKzE,IAAIgF,WAAW,IAAInC,IAASoC,mBACjCR,EAAKzE,IAAIgF,WAAW,IAAInC,IAASqC,iBAAiB,CAChDC,gBAAiB,CAAEC,oBAAoB,GACvCC,mBAAmB,SAhDpB,CAAAb,IAAA,eAAAT,MAAA,SAoGQuB,GACXhH,QAAQC,IAAI,iBAAkB+G,GAC9B1F,KAAKmF,SAAS,CAAChB,MAAOuB,MAtGnB,CAAAd,IAAA,YAAAT,MAAA,SAyGKwB,GAER3F,KAAKI,IAAIwF,UAAU,WAAYD,KA3G5B,CAAAf,IAAA,UAAAT,MAAA,WA8GK,IAAA0B,EACoB7F,KAAKC,MAAM6F,OAA/BC,EADAF,EACAE,SAAU9G,EADV4G,EACU5G,MAClBe,KAAKI,IAAI4F,iBAAiB,YAAa,aAAc,CACnDD,WACA9G,YAlHC,CAAA2F,IAAA,SAAAT,MAAA,WAsHI,IAAA8B,EAAAjG,KACCkG,EAAalG,KAAKC,MAAlBiG,SACA9F,EAAQJ,KAAK8D,MAAb1D,IACR,OACEE,EAAAC,EAAAC,cAAA,MAAAgD,OAAA2C,EAAA,EAAA3C,CAAA,CAAKjC,UAAU,MAAM6E,IAAK,SAACC,GAAQJ,EAAKjB,aAAeqB,IAAvD,YAAsE,QAClEjG,GAAO8F,OA3HV/C,EAAA,CAAqBmD,IAAMtE,WAA3BqB,EAGEkD,kBAAoB,CACzBnG,IAAKoG,IAAUC,QAJZrD,GCJcsD,+LAcE,IACXtG,EAAQJ,KAAK2G,QAAbvG,IADWwG,EAMf5G,KAAKC,MAHP4G,EAHiBD,EAGjBC,GACA1E,EAJiByE,EAIjBzE,KAJiByE,EAKjBE,IAEF1G,EAAI2G,UAAUF,EAAI,CAAEG,KAAM,UAAW7E,KAAMA,mDAGtB,IACb/B,EAAQJ,KAAK2G,QAAbvG,IACAyG,EAAO7G,KAAKC,MAAZ4G,GACRzG,EAAI6G,aAAaJ,oCAGV,IAAAtD,EAAAvD,KACP,OACEM,EAAAC,EAAAC,cAAA,WACGR,KAAKC,MAAMiG,UACVI,IAAMY,SAAS9G,IAAIJ,KAAKC,MAAMiG,SAAU,SAAAiB,GAAK,OAC3Cb,IAAMc,aAAaD,EAAO,CACxBE,SAAU9D,EAAKtD,MAAM4G,GACrBS,YAAa/D,EAAKtD,MAAMsH,kBArCFjB,IAAMtE,WAArB0E,EAUZc,aAAe,CACpBpH,IAAKoG,IAAUC,sMCMI,IACXrG,EAAQJ,KAAK2G,QAAbvG,IADWwG,EAWf5G,KAAKC,MARP4G,EAHiBD,EAGjBC,GACAG,EAJiBJ,EAIjBI,KAEAK,GANiBT,EAKjBU,YALiBV,EAMjBS,UANiBI,EAAAb,EAOjBc,cAPiB,IAAAD,EAOR,GAPQA,EAAAE,EAAAf,EAQjBgB,aARiB,IAAAD,EAQT,GARSA,EASjBE,EATiBjB,EASjBiB,eACAC,EAViBlB,EAUjBkB,OAGIC,EAAO,GAAAC,OAAMX,EAAN,KAAAW,OAAkBnB,GAClB,GAAAmB,OAAMhB,EAAN,YAEb5G,EAAI6H,SAAS,CACXpB,GAAIkB,EACJG,OAAQb,EACRL,OACAU,SACAE,MAAOA,GACPE,IAEW,IAAI7E,IAASkF,QACvBC,UAAU,EAAE,mBAAoB,aAChCC,MAAMjI,GAGLyH,GAAgBzH,EAAIkI,kBAAkBP,EAAS,aAAc,0DAGzCQ,GAAW,IAC3BnI,EAAQJ,KAAK2G,QAAbvG,IAD2BoI,EAEYxI,KAAKC,MAA5C4G,EAF2B2B,EAE3B3B,GAAUQ,GAFiBmB,EAEvBxB,KAFuBwB,EAEjBnB,UAAUQ,EAFOW,EAEPX,eACtBE,EAAO,GAAAC,OAAMX,EAAN,KAAAW,OAAkBnB,GAO/B,GAAI0B,EAAUV,iBAAmBA,EAAgB,CAC/C,IAAMY,EAAcF,EAAUV,eAAkB,UAAY,OAC5DzH,EAAIkI,kBAAkBP,EAAS,aAAcU,GAG/C,OAAO,oDAGc,IACbrI,EAAQJ,KAAK2G,QAAbvG,IADasI,EAEI1I,KAAKC,MAAtB4G,EAFa6B,EAEb7B,GAAIQ,EAFSqB,EAETrB,SACNU,EAAO,GAAAC,OAAMX,EAAN,KAAAW,OAAkBnB,GAC/BzG,EAAIuI,YAAYZ,oCAIhB,OAAO,YA1EwBzB,IAAMtE,YAYhCwF,aAAe,CACpBpH,IAAKoG,IAAUC,mBCbEmC,+LAYE,IACXxI,EAAQJ,KAAK2G,QAAbvG,IAWJyI,EAAW7I,KAAKC,MAAMkC,KAAK0G,SAC/B7I,KAAK8I,WAAWD,EAAUzI,GAE1B1B,QAAQC,IAAI,QAASyB,sCAIZyI,EAAUzI,GAEHyI,EAASzI,IAAI,SAAC2I,GAE1B,IAAI9H,EAAM8H,EAAQlG,WAAW3B,MACzBa,EAAQgH,EAAQlG,WAAWd,MAE3BiH,GADOD,EAAQlG,WAAWD,KACnB,GAAM,IAAOb,GAEpBkH,EAAMC,SAAS1I,cAAc,OACjCyI,EAAIE,aAAa,QAAS,QAC1BF,EAAIE,aAAa,SAAU,QAC3BF,EAAIE,aAAa,MAAOlI,GAExB,IAAImI,EAAKF,SAAS1I,cAAc,OAChC4I,EAAG7H,UAAY,SAEf6H,EAAG1H,MAAM2H,MAAQL,EAAO,KACxBI,EAAG1H,MAAM9B,OAASoJ,EAAO,KAEzB,IAAIM,EAAmB,IAAIC,MAC3BD,EAAiBrI,IAAMA,EACvBqI,EAAiBE,OAAS,WACtBP,EAAIhI,IAAMjB,KAAKiB,KAGnBmI,EAAGK,OAAOR,GAGVG,EAAGM,iBAAiB,QAAS,WACzBC,OAAOC,MAAMb,EAAQlG,WAAWlB,eAIpC,IAAIsB,IAASkF,OAAOiB,GACfhB,UAAUW,EAAQc,SAASC,aAC3BzB,MAAMjI,oDAIM,IACbA,EAAQJ,KAAK2G,QAAbvG,IADawG,EAEI5G,KAAKC,MAAtB4G,EAFaD,EAEbC,GAAIQ,EAFST,EAETS,SACNU,EAAO,GAAAC,OAAMX,EAAN,KAAAW,OAAkBnB,GAG/BzG,EAAIuI,YAAYZ,oCAIhB,OAAO,YAjF0BzB,IAAMtE,WAAtB4G,EAQZpB,aAAe,CACpBpH,IAAKoG,IAAUC,YC6CJsD,6MA9CXjG,MAAQ,CACJkG,QAAS,uFAIT,IAAIA,EAAUC,oBAAuBjK,KAAKC,MAAMkC,MAEhDzD,QAAQC,IAAI,YAAaqL,EAAShK,KAAKC,MAAMkC,MAC7CnC,KAAKmF,SAAS,CAAE6E,QAASA,qCAKzB,IAAIE,EAAWlK,KAAKC,MAAMkC,KAAKC,OAAS,EAGxC,OAFA1D,QAAQC,IAAI,aAAcuL,GAGtB5J,EAAAC,EAAAC,cAAA,WACE0J,EACM5J,EAAAC,EAAAC,cAAA,OAAKe,UAAY,iBACbjB,EAAAC,EAAAC,cAAC2J,EAAD,CAAKpG,IAAK/D,KAAKC,MAAM8D,IAAKC,IAAKhE,KAAKC,MAAM+D,IAAKE,QAAS,EAAGD,KAAM,IAC7D3D,EAAAC,EAAAC,cAAC4J,EAAD,CAAQvD,GAAG,SAAS1E,KAAMnC,KAAK8D,MAAMkG,QAASzC,MAAM,UAChDjH,EAAAC,EAAAC,cAAC6J,EAAD,CACIlI,KAAMnC,KAAK8D,MAAMkG,aAOrC1J,EAAAC,EAAAC,cAAA,oCAhCQwB,aCuFTsI,qNA/EXxG,MAAQ,CACJ3B,KAAM,GACNG,MAAO,GACPyB,IAAK,kBACLwG,KAAM,kBACNC,eAAe,KAkBnBC,WAAa,SAAUhM,GAAU,IAAAoG,EAAA7E,KAEzB0K,EAAQC,IAAYC,UAAU,CAC9B7G,IAAK/D,KAAK8D,MAAMC,IAChBwG,IAAKvK,KAAK8D,MAAMyG,IAChBM,SAAU,IAGdC,MAAM,eAAiBJ,GAClBK,MAAM,SAAAC,GAAG,OAAItM,QAAQuM,MAAMD,KAC3BE,KAAK,SAAA/I,GAAI,OAAIA,EAAKgJ,SAClBD,KAAK,SAAAE,GACF1M,QAAQC,IAAI,iBAAkBkG,EAAKf,MAAM3B,MACzC0C,EAAKM,SAAS,CAAEhD,KAAMiJ,EAAIjJ,6FA5BlB,IAAA8D,EAAAjG,KAGhBqL,IAAQpN,cACHiN,KAAK,SAACzM,GACCA,GACAwH,EAAKd,SAAS,CACVpB,IAAKtF,EAAS6M,OAAOC,SACrBhB,IAAK9L,EAAS6M,OAAOE,YAG7BvF,EAAKwE,8DAyBTzK,KAAK8D,MAAM0G,gBACXiB,cAAczL,KAAK8D,MAAM0G,eACzBxK,KAAKmF,SAAS,CAAEqF,cAAe,yCAMnC,OACIlK,EAAAC,EAAAC,cAAA,WAEIF,EAAAC,EAAAC,cAAA,gCAIAF,EAAAC,EAAAC,cAACkL,EAAA,EAAD,CAAMC,qBAAqB,UACvBrL,EAAAC,EAAAC,cAACkL,EAAA,EAAD,CAASnK,UAAU,qBACfjB,EAAAC,EAAAC,cAACkL,EAAA,EAAD,CAAKnK,UAAU,QAAf,QACAjB,EAAAC,EAAAC,cAACkL,EAAA,EAAD,CAAKnK,UAAU,QAAf,QAGJjB,EAAAC,EAAAC,cAACkL,EAAA,EAAD,KACIpL,EAAAC,EAAAC,cAACoL,EAAD,CAAYzJ,KAAMnC,KAAK8D,MAAM3B,QAEjC7B,EAAAC,EAAAC,cAACkL,EAAA,EAAD,KACIpL,EAAAC,EAAAC,cAACqL,EAAD,CAAW1J,KAAMnC,KAAK8D,MAAM3B,KAAM4B,IAAK/D,KAAK8D,MAAMC,IAAKC,IAAKhE,KAAK8D,MAAMyG,gBAvEtEvI,kDCiBV8J,qNAzBbhI,MAAQ,CAAEiI,WAAY,gFAGG/L,KAAK8D,MAApBiI,WAER,OACEzL,EAAAC,EAAAC,cAAA,OAAKe,UAAU,OAEbjB,EAAAC,EAAAC,cAACwL,EAAA,EAAD,KACE1L,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAACyL,EAAA,EAAD,CAAMC,UAAQ,GACZ5L,EAAAC,EAAAC,cAACyL,EAAA,EAAKE,KAAN,KACE7L,EAAAC,EAAAC,cAAC4L,EAAA,EAAD,CAAMC,GAAG,WAAT,mBAIJ/L,EAAAC,EAAAC,cAAC8L,EAAA,EAAD,CAAOC,OAAK,EAACC,KAAK,UAAUC,UAAWnC,cAjBjCtI,cCKE0K,QACW,cAA7B/C,OAAOgD,SAASC,UAEe,UAA7BjD,OAAOgD,SAASC,UAEhBjD,OAAOgD,SAASC,SAASC,MACvB,2DCZNC,IAASC,OAAOzM,EAAAC,EAAAC,cAACwM,EAAD,MAAS9D,SAAS+D,eAAe,SD2H3C,kBAAmB3O,WACrBA,UAAU4O,cAAcC,MAAMjC,KAAK,SAAAkC,GACjCA,EAAaC","file":"static/js/main.33211cd8.chunk.js","sourcesContent":["module.exports = {\r\n\r\n    // Get HTML Position\r\n    getPosition:function (options) {\r\n        return new Promise(function (resolve, reject) {\r\n\r\n            navigator.geolocation.getCurrentPosition(function (position) {\r\n                console.log(typeof (position))\r\n                resolve(position);\r\n            });\r\n\r\n        });\r\n    }\r\n\r\n}","module.exports = {\n    places_circle: {\n      'circle-radius': [\n      'interpolate',\n      ['exponential', 3],\n      [\"zoom\"],\n      3, ['*', 0.5, ['to-number', ['get', 'rating']]],\n      12, ['*', 1, ['to-number', ['get', 'rating']]],\n      18, ['*', 10, ['to-number', ['get', 'rating']]]],\n\n      'circle-color': '#BA3BAD',\n      'circle-stroke-color': 'white',\n      'circle-stroke-width': {\n        stops: [\n        [12, 0.5],\n        [18, 4.0]] },\n\n      'circle-opacity': {\n        stops: [[10, 0.0], [12, 0.4], [13, 0.6], [18, 1.0]] },\n\n      'circle-stroke-opacity': {\n        stops: [[10, 0.0], [12, 0.4], [13, 0.6], [18, 1.0]] }\n    },\n    places_heatmap: {\n      'heatmap-radius' : [\n        \"interpolate\",\n        [\"linear\"],\n        [\"zoom\"],\n          8, 4,\n          10, 14,\n          12, 18\n      ],\n      'heatmap-opacity': [\n        \"interpolate\",\n        [\"linear\"],\n        [\"zoom\"],\n          8, 0.8,\n          14, 0.4\n      ],\n      \"heatmap-color\": [\n        \"interpolate\",\n        [\"linear\"],\n        [\"heatmap-density\"],\n          0, 'rgba(0,255,255, 0)',\n          0.2, 'rgba(227,255,207, 0.4)',\n          0.3, '#ffff80',\n          0.6, '#d6a983',\n          0.8, '#9d6697',\n          1, '#603583'\n        ]\n    },\n    events_circle: {\n      // increase the radius of the circle as the zoom level and dbh value increases\n      'circle-radius': {\n        'base': 3,\n        'stops': [[8, 4], [18, 20]] },\n\n        'circle-color': '#4F94CD',\n        'circle-stroke-color': '#2D43B4',\n        'circle-stroke-width': 0.6,\n        'circle-opacity': 0.2,\n        'circle-translate': [-2, -2]\n    }\n}\n","import React, { Component } from 'react';\r\nimport { Card, Icon, Image } from 'semantic-ui-react'\r\nimport PropTypes from 'prop-types';\r\nimport moment from 'moment';\r\n\r\n\r\nconst descriptionStyle = {\r\n    position: 'relative',\r\n    height: '6.6em', /* exactly three lines */\r\n    overflow: 'hidden',\r\n    textOverflow: 'ellipsis'\r\n};\r\n\r\nclass EventCard extends Component {\r\n    render() {\r\n\r\n        let categories = this.props.content.categories.map((category) => <span class={category}>Category</span>);\r\n        let date = moment(this.props.content.date)\r\n        let start = this.props.content.start_time\r\n\r\n        return (\r\n            <div>\r\n                <Card fluid>\r\n                    <Image src={this.props.content.image} />\r\n                    <Card.Content>\r\n                        <Card.Header>{this.props.content.title}</Card.Header>\r\n                        <Card.Meta>\r\n                            <span className='date'>{date.format('dddd')} {start}</span>\r\n                        </Card.Meta>\r\n                        <Card.Description style={descriptionStyle}>{this.props.content.description}</Card.Description>\r\n                    </Card.Content>\r\n                    <Card.Content extra>\r\n                        <a>\r\n                            <Icon name='user' />\r\n                            {this.props.content.likes} People\r\n      </a>\r\n                    </Card.Content>\r\n                </Card>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nEventCard.propTypes = {\r\n    content: PropTypes.object.isRequired\r\n};\r\n\r\nexport default EventCard;","import React, { Component } from 'react';\r\nimport { Grid, Dropdown, GridColumn, Tab } from 'semantic-ui-react'\r\nimport PropTypes from 'prop-types';\r\n\r\nimport EventCard from './event_card.js'\r\n\r\nclass EventsList extends Component {\r\n    render() {\r\n\r\n        let has_items = this.props.data.length > 0;\r\n        let top_item = null;\r\n        let items = null;\r\n\r\n        if (has_items) {\r\n            //TODO: this is problematic if the user re-renders the page. \r\n            top_item = this.props.data.shift();\r\n\r\n            items = this.props.data.map((event) => <Grid.Column><EventCard link={event.properties.link} content={event.properties} /></Grid.Column>);\r\n        }\r\n\r\n        return (\r\n            <div className='content'>\r\n\r\n                {has_items ? (\r\n                    <Grid stackable columns={2}>\r\n                        <Grid.Row>\r\n                            <EventCard link={top_item.properties.link} content={top_item.properties} />\r\n                        </Grid.Row>\r\n                        <Grid.Row>\r\n                            {items}\r\n                        </Grid.Row>\r\n                    </Grid>\r\n                ) : (\r\n                        <span>No results yet</span>\r\n                    )}\r\n                List will go here.\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nEventsList.propTypes = {\r\n    data: PropTypes.array.isRequired\r\n};\r\n\r\nexport default EventsList;","import React from 'react'\nimport PropTypes from 'prop-types'\nimport mapboxgl from 'mapbox-gl'\n\n// TODO: pass from config\nmapboxgl.accessToken = 'pk.eyJ1Ijoic3RldmVwZXBwbGUiLCJhIjoiTmd4T0wyNCJ9.1-jWg2J5XmFfnBAhyrORmw';\n\nlet Map = class Map extends React.Component {\n  map;\n\n  static childContextTypes = {\n    map: PropTypes.object\n  }\n\n  getChildContext = () => ({\n    map: this.state.map\n  })\n\n  constructor(props) {\n    super(props);    \n\n    this.state = {\n      lat: props.lat !== 'undefined' !== null ? props.lat: 37.805308,\n      lng: props.lng !== 'undefined' ? props.lng : -122.2708464,\n      zoom: typeof props.zoom !== 'undefined' ? props.zoom : 13,\n      bearing: typeof props.bearing !== 'undefined' ? props.bearing : 28,\n      map: null,\n      value: 'all',\n      show_events: true,\n      show_places: true,\n      show_cluster: false\n    };\n    this.updateParent = this.updateParent.bind(this)\n  }\n\n  componentDidUpdate() {\n    console.log(this.state.map)\n  }\n\n  componentDidMount() {\n    const { lng, lat, bearing, zoom } = this.state;\n\n    this.map = new mapboxgl.Map({\n      container: this.mapContainer,\n      style: 'mapbox://styles/stevepepple/cihazstxs005l4llzl0jn7pyc',\n      center: [lng, lat],\n      bearing: bearing,\n      zoom: zoom\n    });\n\n    this.map.on('load', () => {\n      this.setState({ map: this.map })\n      this.map.addControl(new mapboxgl.NavigationControl());\n      this.map.addControl(new mapboxgl.GeolocateControl({\n        positionOptions: { enableHighAccuracy: true },\n        trackUserLocation: true\n      }));\n\n      /*\n      // Show Places\n      this.map.addLayer({\n          id: 'places-2',\n          type: 'circle',\n          source: 'places_source',\n          'layout': { 'visibility': this.state.show_places ? 'visible' : 'none' },\n          minzoom: 10,\n          paint: {\n            'circle-radius': [\n            'interpolate',\n            ['exponential', 3],\n            [\"zoom\"],\n            3, ['*', 0.5, ['to-number', ['get', 'rating']]],\n            12, ['*', 1, ['to-number', ['get', 'rating']]],\n            18, ['*', 10, ['to-number', ['get', 'rating']]]],\n\n            'circle-color': 'rgb(121, 76, 138)',\n            'circle-stroke-color': 'white',\n            'circle-stroke-width': {\n              stops: [\n              [12, 0.5],\n              [18, 4.0]] },\n\n            'circle-opacity': {\n              stops: [[10, 0.0], [12, 0.4], [13, 0.6], [18, 1.0]] },\n\n            'circle-stroke-opacity': {\n              stops: [[10, 0.0], [12, 0.4], [13, 0.6], [18, 1.0]] } }\n        });\n        */\n\n      /*\n      this.map.addSource('countries', {\n        type: 'geojson',\n        data: this.props.data\n      });\n\n      // TODO: this will be the hotspots\n      this.map.addLayer({\n        id: 'countries',\n        type: 'fill',\n        source: 'countries'\n      }, 'country-label-lg'); // ID metches `mapbox/streets-v9`\n      */\n    });\n\n  }\n\n  updateParent(field) {\n    console.log(\"updateParent: \", field);\n    this.setState({value: field});\n  }\n\n  setFilter(filter) {\n    //map.setFilter('places', filter);\n    this.map.setFilter('places-2', filter);\n  }\n\n  setFill() {\n    const { property, stops } = this.props.active;\n    this.map.setPaintProperty('countries', 'fill-color', {\n      property,\n      stops\n    });\n  }\n\n  render() {\n    const { children } = this.props\n    const { map } = this.state\n    return (\n      <div className='map' ref={(x) => { this.mapContainer = x }} className='left'>\n        { map && children }\n      </div>\n    );\n  }\n}\n\nfunction mapStateToProps(state) {\n  return {\n    data: state.data,\n    active: state.active\n  };\n}\n\nexport default Map;\n","import React from 'react'\nimport PropTypes from 'prop-types'\n\nexport default class Source extends React.Component {\n\n  static propTypes = {\n    id: PropTypes.string,\n    data: PropTypes.object,\n    url: PropTypes.string,\n    layer: PropTypes.string,\n    children: PropTypes.node\n  }\n\n  static contextTypes = {\n    map: PropTypes.object\n  }\n\n  componentWillMount() {\n    const { map } = this.context\n    const {\n      id,\n      data,\n      url\n    } = this.props\n    map.addSource(id, { type: 'geojson', data: data })\n  }\n\n  componentWillUnmount() {\n    const { map } = this.context\n    const { id } = this.props\n    map.removeSource(id)\n  }\n\n  render() {\n    return (\n      <div>\n        {this.props.children &&\n          React.Children.map(this.props.children, child => (\n            React.cloneElement(child, {\n              sourceId: this.props.id,\n              sourceLayer: this.props.layer\n            })\n          ))\n        }\n      </div>\n    )\n  }\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport mapboxgl from 'mapbox-gl'\n\nexport default class Layer extends React.Component {\n\n  static propTypes = {\n    id: PropTypes.string,\n    type: PropTypes.string,\n    sourceLayer: PropTypes.string,\n    sourceId: PropTypes.string,\n    paint: PropTypes.object,\n    layout: PropTypes.object,\n    before: PropTypes.string\n  }\n\n  static contextTypes = {\n    map: PropTypes.object\n  }\n\n  componentWillMount() {\n    const { map } = this.context\n    const {\n      id,\n      type,\n      sourceLayer,\n      sourceId,\n      layout = {},\n      paint = {},\n      isLayerChecked,\n      before\n    } = this.props\n\n    const layerId = `${sourceId}-${id}`\n    const opacity = `${type}-opacity`\n\n    map.addLayer({\n      id: layerId,\n      source: sourceId,\n      type,\n      layout,\n      paint: paint\n    },before)\n\n    let marker = new mapboxgl.Marker()\n      .setLngLat([-122.40612019999999, 37.7842682])\n      .addTo(map);\n\n\n    if(!isLayerChecked) map.setLayoutProperty(layerId, 'visibility', 'none')\n  }\n\n  componentWillReceiveProps(nextProps) {\n    const { map } = this.context\n    const { id, type, sourceId, isLayerChecked } = this.props\n    const layerId = `${sourceId}-${id}`\n\n    /*\n    if (nextProps.sliderValue && nextProps.sliderValue !== sliderValue) {\n      map.setPaintProperty(layerId, `${type}-opacity`, nextProps.sliderValue)\n    }\n    */\n    if (nextProps.isLayerChecked !== isLayerChecked) {\n      const visibility = (nextProps.isLayerChecked) ? 'visible' : 'none'\n      map.setLayoutProperty(layerId, 'visibility', visibility)\n    }\n\n    return null\n  }\n\n  componentWillUnmount() {\n    const { map } = this.context\n    const { id, sourceId } = this.props\n    const layerId = `${sourceId}-${id}`\n    map.removeLayer(layerId)\n  }\n\n  render() {\n    return null\n  }\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport mapboxgl from 'mapbox-gl'\n\nexport default class Markers extends React.Component {\n\n  static propTypes = {\n    data: PropTypes.object,\n    before: PropTypes.string\n  }\n\n  // Thid means the object is the child of a parent with this data.\n  static contextTypes = {\n    map: PropTypes.object,\n  }\n\n  componentWillMount() {\n    const { map } = this.context\n\n    /*\n    map.addLayer({\n      id: layerId,\n      source: sourceId,\n      type,\n      layout,\n      paint: paint\n    },before)\n    */\n    let features = this.props.data.features;\n    this.addMarkers(features, map)\n\n    console.log('map: ', map)\n\n  }\n  \n  addMarkers(features, map) {\n\n      let markers = features.map((feature) => {\n\n        let src = feature.properties.image;\n        let likes = feature.properties.likes;\n        let link = feature.properties.link;\n        let size = 30 + (0.08 * likes);\n\n        let img = document.createElement('img');\n        img.setAttribute('width', '100%');\n        img.setAttribute('height', '100%');\n        img.setAttribute('rel', src);\n\n        var el = document.createElement('div');\n        el.className = 'marker';\n        //el.style.backgroundImage = 'url(' + src +')';\n        el.style.width = size + 'px';\n        el.style.height = size + 'px';\n\n        var downloadingImage = new Image();\n        downloadingImage.src = src;\n        downloadingImage.onload = function () {\n            img.src = this.src;\n        }\n\n        el.append(img);\n\n\n        el.addEventListener('click', function () {\n            window.alert(feature.properties.description);\n        });\n\n        // add marker to map\n        new mapboxgl.Marker(el)\n            .setLngLat(feature.geometry.coordinates)\n            .addTo(map);\n      });\n  }\n\n  componentWillUnmount() {\n    const { map } = this.context\n    const { id, sourceId } = this.props\n    const layerId = `${sourceId}-${id}`\n\n    // TODO: clean up markers\n    map.removeLayer(layerId)\n  }\n\n  render() {\n    return null\n  }\n}\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport * as turf from '@turf/turf'\r\n\r\nimport Map from './map.js'\r\nimport Source from './source'\r\nimport Layer from './layer'\r\nimport Styles from '../styles/map_styles.js'\r\nimport Markers from './markers.js';\r\n\r\nclass EventsMap extends Component {\r\n\r\n    state = {\r\n        geojson: [],\r\n    }\r\n\r\n    componentDidMount(){\r\n        let geojson = turf.featureCollection(this.props.data);\r\n\r\n        console.log('geojson: ', geojson, this.props.data)\r\n        this.setState({ geojson: geojson })\r\n    }\r\n\r\n    render() {\r\n\r\n        let has_data = this.props.data.length > 0;\r\n        console.log('Has data? ', has_data)\r\n\r\n        return (\r\n            <div>\r\n            { has_data? (\r\n                    <div className = 'map_container' >\r\n                        <Map lat={this.props.lat} lng={this.props.lng} bearing={0} zoom={14}>\r\n                            <Source id='events' data={this.state.geojson} layer='events'>\r\n                                <Markers\r\n                                    data={this.state.geojson}\r\n                                />\r\n                            </Source>\r\n\r\n                        </Map>\r\n                </div>\r\n                ) : (\r\n                <span> Loading Map</span>\r\n            )}\r\n            </div>\r\n            \r\n        );\r\n    }\r\n}\r\n\r\nEventsMap.propTypes = {\r\n    data: PropTypes.array.isRequired,\r\n    lat: PropTypes.number,\r\n    lng: PropTypes.number,\r\n    bearing: PropTypes.number,\r\n    zoom: PropTypes.number\r\n};\r\n\r\nexport default EventsMap;","import React, { Component } from 'react';\r\nimport { Tab, Tabs, TabList, TabPanel } from 'react-tabs';\r\n\r\nimport { Menu, Dropdown } from 'semantic-ui-react'\r\nimport querystring from 'querystring';\r\n\r\n\r\nimport helpers from '../helpers.js'\r\n\r\nimport EventCard from './event_card.js'\r\nimport EventsList from './events_list.js';\r\nimport EventsMap from './events_map.js';\r\n\r\nimport '../styles/events_page.css';\r\n\r\n\r\nclass EventsPage extends Component {\r\n\r\n    state = {\r\n        data: [],\r\n        items: [],\r\n        lat: 37.79535238155009,\r\n        lon: -122.2823644705406,\r\n        intervalIsSet: false\r\n    }\r\n     \r\n    componentDidMount() {\r\n\r\n        // Users geo location from HTML 5 util\r\n        helpers.getPosition()\r\n            .then((position) => {\r\n                if (position) {\r\n                    this.setState({\r\n                        lat: position.coords.latitude,\r\n                        lon: position.coords.longitude\r\n                    });\r\n                }\r\n                this.showEvents();\r\n            })\r\n    }\r\n\r\n    showEvents = function (position) {\r\n        \r\n        let query = querystring.stringify({\r\n            lat: this.state.lat,\r\n            lon: this.state.lon,\r\n            distance: 2.0\r\n        });\r\n\r\n        fetch(\"/api/events?\" + query)\r\n            .catch(err => console.error(err))\r\n            .then(data => data.json())\r\n            .then(res => {\r\n                console.log('API response: ', this.state.data)\r\n                this.setState({ data: res.data })\r\n            \r\n            });\r\n    }\r\n\r\n    // never let a process live forever \r\n    // always kill a process everytime we are done using it\r\n    componentWillUnmount() {\r\n        if (this.state.intervalIsSet) {\r\n            clearInterval(this.state.intervalIsSet);\r\n            this.setState({ intervalIsSet: null });\r\n        }\r\n    }\r\n\r\n    render() {\r\n        \r\n        return (\r\n            <div>                \r\n\r\n                <h2>Happening Near You</h2>\r\n                \r\n                {/* <Dropdown placeholder='All Events' /> */}\r\n                \r\n                <Tabs selectedTabClassName='active'>\r\n                    <TabList className='ui menu secondary'>\r\n                        <Tab className='item'>List</Tab>\r\n                        <Tab className='item'>Map</Tab>\r\n                    </TabList>\r\n\r\n                    <TabPanel>\r\n                        <EventsList data={this.state.data} />\r\n                    </TabPanel>\r\n                    <TabPanel>\r\n                        <EventsMap data={this.state.data} lat={this.state.lat} lng={this.state.lon} />\r\n                    </TabPanel>\r\n                </Tabs>\r\n                \r\n            </div>\r\n \r\n        );\r\n    }\r\n}\r\n\r\nexport default EventsPage;","import React, { Component } from 'react';\r\nimport EventsPage from './components/events_page';\r\nimport { BrowserRouter as Router, Redirect, Route, Link } from \"react-router-dom\";\r\nimport { Menu } from 'semantic-ui-react'\r\n\r\nimport './App.css';\r\n\r\nclass App extends Component {\r\n  state = { activeItem: 'home' }\r\n\r\n  render() {\r\n    const { activeItem } = this.state\r\n\r\n    return (\r\n      <div className=\"App\">\r\n  \r\n        <Router>\r\n          <div>\r\n            <Menu pointing>\r\n              <Menu.Item>\r\n                <Link to=\"/events\">Nearby Events</Link>\r\n              </Menu.Item>\r\n            </Menu>\r\n            \r\n            <Route exact path=\"/events\" component={EventsPage} />\r\n          </div>\r\n        </Router>\r\n        \r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';    \nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}