(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{120:function(e,t){e.exports={getPosition:function(e){return new Promise(function(e,t){navigator.geolocation.getCurrentPosition(function(t){console.log(typeof t),e(t)})})}}},144:function(e,t,a){e.exports=a(292)},149:function(e,t,a){},271:function(e,t){e.exports={places_circle:{"circle-radius":["interpolate",["exponential",3],["zoom"],3,["*",.5,["to-number",["get","rating"]]],12,["*",1,["to-number",["get","rating"]]],18,["*",10,["to-number",["get","rating"]]]],"circle-color":"#BA3BAD","circle-stroke-color":"white","circle-stroke-width":{stops:[[12,.5],[18,4]]},"circle-opacity":{stops:[[10,0],[12,.4],[13,.6],[18,1]]},"circle-stroke-opacity":{stops:[[10,0],[12,.4],[13,.6],[18,1]]}},places_heatmap:{"heatmap-radius":["interpolate",["linear"],["zoom"],8,4,10,14,12,18],"heatmap-opacity":["interpolate",["linear"],["zoom"],8,.8,14,.4],"heatmap-color":["interpolate",["linear"],["heatmap-density"],0,"rgba(0,255,255, 0)",.2,"rgba(227,255,207, 0.4)",.3,"#ffff80",.6,"#d6a983",.8,"#9d6697",1,"#603583"]},events_circle:{"circle-radius":{base:3,stops:[[8,4],[18,20]]},"circle-color":"#4F94CD","circle-stroke-color":"#2D43B4","circle-stroke-width":.6,"circle-opacity":.2,"circle-translate":[-2,-2]}}},272:function(e,t,a){},274:function(e,t,a){},292:function(e,t,a){"use strict";a.r(t);var n,o,r=a(0),i=a.n(r),c=a(37),s=a.n(c),l=(a(149),a(13)),p=a(14),u=a(17),m=a(15),d=a(16),h=a(33),v=a(119),f=a.n(v),y=a(120),b=a.n(y),g=a(301),j=a(300),k=a(293),E=a(121),O=a.n(E),w={position:"relative",height:"6.6em",overflow:"hidden",textOverflow:"ellipsis"},C=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){this.props.content.categories.map(function(e){return i.a.createElement("span",{class:e},"Category")});var e=O()(this.props.content.date),t=this.props.content.start_time;return i.a.createElement("div",null,i.a.createElement(g.a,{fluid:!0},i.a.createElement(j.a,{src:this.props.content.image}),i.a.createElement(g.a.Content,null,i.a.createElement(g.a.Header,null,this.props.content.title),i.a.createElement(g.a.Meta,null,i.a.createElement("span",{className:"date"},e.format("dddd")," ",t)),i.a.createElement(g.a.Description,{style:w},this.props.content.description)),i.a.createElement(g.a.Content,{extra:!0},i.a.createElement("a",null,i.a.createElement(k.a,{name:"user"}),this.props.content.likes," People"))))}}]),t}(r.Component),x=a(304),L=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props.data.length>0,t=null,a=null;return e&&(t=this.props.data.shift(),a=this.props.data.map(function(e){return i.a.createElement(x.a.Column,null,i.a.createElement(C,{link:e.properties.link,content:e.properties}))})),i.a.createElement("div",{className:"content"},e?i.a.createElement(x.a,{stackable:!0,columns:2},i.a.createElement(x.a.Row,null,i.a.createElement(C,{link:t.properties.link,content:t.properties})),i.a.createElement(x.a.Row,null,a)):i.a.createElement("span",null,"No results yet"),"List will go here.")}}]),t}(r.Component),I=a(131),N=a(132),P=a(46),M=a(1),A=a.n(M),S=a(29),z=a.n(S);z.a.accessToken="pk.eyJ1Ijoic3RldmVwZXBwbGUiLCJhIjoiTmd4T0wyNCJ9.1-jWg2J5XmFfnBAhyrORmw";var W=(o=n=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).getChildContext=function(){return{map:a.state.map}},a.state={lat:"undefined"!==e.lat!==null?e.lat:37.805308,lng:"undefined"!==e.lng?e.lng:-122.2708464,zoom:"undefined"!==typeof e.zoom?e.zoom:13,bearing:"undefined"!==typeof e.bearing?e.bearing:28,map:null,value:"all",show_events:!0,show_places:!0,show_cluster:!1},a.updateParent=a.updateParent.bind(Object(P.a)(Object(P.a)(a))),a}return Object(d.a)(t,e),Object(p.a)(t,[{key:"componentDidUpdate",value:function(){console.log(this.state.map)}},{key:"componentDidMount",value:function(){var e=this,t=this.state,a=t.lng,n=t.lat,o=t.bearing,r=t.zoom;this.map=new z.a.Map({container:this.mapContainer,style:"mapbox://styles/stevepepple/cihazstxs005l4llzl0jn7pyc",center:[a,n],bearing:o,zoom:r}),this.map.on("load",function(){e.setState({map:e.map}),e.map.addControl(new z.a.NavigationControl),e.map.addControl(new z.a.GeolocateControl({positionOptions:{enableHighAccuracy:!0},trackUserLocation:!0}))})}},{key:"updateParent",value:function(e){console.log("updateParent: ",e),this.setState({value:e})}},{key:"setFilter",value:function(e){this.map.setFilter("places-2",e)}},{key:"setFill",value:function(){var e=this.props.active,t=e.property,a=e.stops;this.map.setPaintProperty("countries","fill-color",{property:t,stops:a})}},{key:"render",value:function(){var e=this,t=this.props.children,a=this.state.map;return i.a.createElement("div",Object(N.a)({className:"map",ref:function(t){e.mapContainer=t}},"className","left"),a&&t)}}]),t}(i.a.Component),n.childContextTypes={map:A.a.object},o),T=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(p.a)(t,[{key:"componentWillMount",value:function(){var e=this.context.map,t=this.props,a=t.id,n=t.data;t.url;e.addSource(a,{type:"geojson",data:n})}},{key:"componentWillUnmount",value:function(){var e=this.context.map,t=this.props.id;e.removeSource(t)}},{key:"render",value:function(){var e=this;return i.a.createElement("div",null,this.props.children&&i.a.Children.map(this.props.children,function(t){return i.a.cloneElement(t,{sourceId:e.props.id,sourceLayer:e.props.layer})}))}}]),t}(i.a.Component);T.contextTypes={map:A.a.object},(function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(p.a)(t,[{key:"componentWillMount",value:function(){var e=this.context.map,t=this.props,a=t.id,n=t.type,o=(t.sourceLayer,t.sourceId),r=t.layout,i=void 0===r?{}:r,c=t.paint,s=void 0===c?{}:c,l=t.isLayerChecked,p=t.before,u="".concat(o,"-").concat(a);"".concat(n,"-opacity");e.addLayer({id:u,source:o,type:n,layout:i,paint:s},p);(new z.a.Marker).setLngLat([-122.40612019999999,37.7842682]).addTo(e);l||e.setLayoutProperty(u,"visibility","none")}},{key:"componentWillReceiveProps",value:function(e){var t=this.context.map,a=this.props,n=a.id,o=(a.type,a.sourceId),r=a.isLayerChecked,i="".concat(o,"-").concat(n);if(e.isLayerChecked!==r){var c=e.isLayerChecked?"visible":"none";t.setLayoutProperty(i,"visibility",c)}return null}},{key:"componentWillUnmount",value:function(){var e=this.context.map,t=this.props,a=t.id,n=t.sourceId,o="".concat(n,"-").concat(a);e.removeLayer(o)}},{key:"render",value:function(){return null}}]),t}(i.a.Component)).contextTypes={map:A.a.object};a(271);var D=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(p.a)(t,[{key:"componentWillMount",value:function(){var e=this.context.map,t=this.props.data.features;this.addMarkers(t,e),console.log("map: ",e)}},{key:"addMarkers",value:function(e,t){e.map(function(e){var a=e.properties.image,n=e.properties.likes,o=(e.properties.link,30+.08*n),r=document.createElement("img");r.setAttribute("width","100%"),r.setAttribute("height","100%"),r.setAttribute("rel",a);var i=document.createElement("div");i.className="marker",i.style.width=o+"px",i.style.height=o+"px";var c=new Image;c.src=a,c.onload=function(){r.src=this.src},i.append(r),i.addEventListener("click",function(){window.alert(e.properties.description)}),new z.a.Marker(i).setLngLat(e.geometry.coordinates).addTo(t)})}},{key:"componentWillUnmount",value:function(){var e=this.context.map,t=this.props,a=t.id,n=t.sourceId,o="".concat(n,"-").concat(a);e.removeLayer(o)}},{key:"render",value:function(){return null}}]),t}(i.a.Component);D.contextTypes={map:A.a.object};var _=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(o)))).state={geojson:[]},a}return Object(d.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=I.featureCollection(this.props.data);console.log("geojson: ",e,this.props.data),this.setState({geojson:e})}},{key:"render",value:function(){var e=this.props.data.length>0;return console.log("Has data? ",e),i.a.createElement("div",null,e?i.a.createElement("div",{className:"map_container"},i.a.createElement(W,{lat:this.props.lat,lng:this.props.lng,bearing:0,zoom:14},i.a.createElement(T,{id:"events",data:this.state.geojson,layer:"events"},i.a.createElement(D,{data:this.state.geojson})))):i.a.createElement("span",null," Loading Map"))}}]),t}(r.Component),B=(a(272),function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(o)))).state={data:[],items:[],lat:37.79535238155009,lon:-122.2823644705406,intervalIsSet:!1},a.showEvents=function(e){var t=this,a=f.a.stringify({lat:this.state.lat,lon:this.state.lon,distance:2});fetch("/api/events?"+a).catch(function(e){return console.error(e)}).then(function(e){return e.json()}).then(function(e){console.log("API response: ",t.state.data),t.setState({data:e.data})})},a}return Object(d.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=this;b.a.getPosition().then(function(t){t&&e.setState({lat:t.coords.latitude,lon:t.coords.longitude}),e.showEvents()})}},{key:"componentWillUnmount",value:function(){this.state.intervalIsSet&&(clearInterval(this.state.intervalIsSet),this.setState({intervalIsSet:null}))}},{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement("h2",null,"Happening Near You"),i.a.createElement(h.d,{selectedTabClassName:"active"},i.a.createElement(h.b,{className:"ui menu secondary"},i.a.createElement(h.a,{className:"item"},"List"),i.a.createElement(h.a,{className:"item"},"Map")),i.a.createElement(h.c,null,i.a.createElement(L,{data:this.state.data})),i.a.createElement(h.c,null,i.a.createElement(_,{data:this.state.data,lat:this.state.lat,lng:this.state.lon}))))}}]),t}(r.Component)),U=a(305),J=a(299),F=a(303),R=a(302),H=(a(274),function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(o)))).state={activeItem:"home"},a}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){this.state.activeItem;return i.a.createElement("div",{className:"App"},i.a.createElement(U.a,null,i.a.createElement("div",null,i.a.createElement(R.a,{pointing:!0},i.a.createElement(R.a.Item,null,i.a.createElement(J.a,{to:"/events"},"Nearby Events"))),i.a.createElement(F.a,{exact:!0,path:"/events",component:B}))))}}]),t}(r.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(i.a.createElement(H,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[144,2,1]]]);
//# sourceMappingURL=main.33211cd8.chunk.js.map